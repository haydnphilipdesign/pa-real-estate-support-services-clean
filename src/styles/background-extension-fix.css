/**
 * Background Slideshow Extension Fix
 * Ensures the background slideshow extends properly beyond the transaction form
 */

/* =====================================================
   BACKGROUND SLIDESHOW FULL COVERAGE
   ===================================================== */

/* Target all possible background slideshow elements */
.background-slideshow,
[data-persistent-background="true"],
.slideshow-container,
.slideshow-wrapper,
.background-container,
.hero-background,
.page-background {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  min-height: 100vh !important;
  max-height: none !important;
  z-index: -100 !important;
  overflow: hidden !important;
}

/* Ensure background images cover the full area */
.background-slideshow img,
[data-persistent-background="true"] img,
.slideshow-container img,
.slideshow-wrapper img,
.background-container img,
.hero-background img,
.page-background img {
  width: 100vw !important;
  height: 100vh !important;
  min-height: 100vh !important;
  max-height: none !important;
  object-fit: cover !important;
  object-position: center !important;
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
}

/* Force background to extend beyond content on transaction pages */
[data-transaction-page="true"] .background-slideshow,
[data-transaction-page="true"] [data-persistent-background="true"],
[data-transaction-page="true"] .slideshow-container {
  height: 200vh !important; /* Extend well beyond viewport */
  min-height: 200vh !important;
}

[data-transaction-page="true"] .background-slideshow img,
[data-transaction-page="true"] [data-persistent-background="true"] img,
[data-transaction-page="true"] .slideshow-container img {
  height: 200vh !important;
  min-height: 200vh !important;
}

/* Ensure transaction form containers allow background to show through */
[data-transaction-page="true"] .page-container,
[data-transaction-page="true"] .main-content,
[data-transaction-page="true"] .content-wrapper {
  background: transparent !important;
  min-height: 100vh !important;
  position: relative !important;
  z-index: 1 !important;
}

/* Fix for any container that might be blocking the background */
[data-transaction-page="true"] .container,
[data-transaction-page="true"] .wrapper,
[data-transaction-page="true"] .layout {
  background: transparent !important;
  position: relative !important;
}

/* =====================================================
   SCROLLING BACKGROUND COVERAGE
   ===================================================== */

/* Ensure background stays fixed during scroll */
.background-slideshow,
[data-persistent-background="true"],
.slideshow-container {
  position: fixed !important;
  will-change: transform !important;
  transform: translateZ(0) !important; /* Force GPU acceleration */
}

/* Prevent any background gaps during scroll */
html, body {
  background: #000 !important; /* Fallback color */
}

[data-transaction-page="true"] {
  background: transparent !important;
}

/* =====================================================
   MOBILE BACKGROUND FIXES
   ===================================================== */

@media (max-width: 768px) {
  .background-slideshow,
  [data-persistent-background="true"],
  .slideshow-container {
    height: 150vh !important;
    min-height: 150vh !important;
  }
  
  .background-slideshow img,
  [data-persistent-background="true"] img,
  .slideshow-container img {
    height: 150vh !important;
    min-height: 150vh !important;
  }
  
  /* Prevent iOS Safari address bar issues */
  [data-transaction-page="true"] {
    min-height: -webkit-fill-available !important;
  }
}

/* =====================================================
   HIGH CONTRAST & ACCESSIBILITY
   ===================================================== */

@media (prefers-reduced-motion: reduce) {
  .background-slideshow img,
  [data-persistent-background="true"] img,
  .slideshow-container img {
    animation: none !important;
    transition: none !important;
  }
}

/* Ensure background doesn't interfere with content readability */
@media (prefers-contrast: high) {
  .background-slideshow,
  [data-persistent-background="true"],
  .slideshow-container {
    opacity: 0.7 !important;
  }
}