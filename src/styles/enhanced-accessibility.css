/**
 * Enhanced Accessibility Stylesheet
 * Provides comprehensive accessibility features for form fields
 */

/* =====================================================
   ENHANCED FIELD CONTAINERS
   ===================================================== */

.tf-field-container {
  @apply mb-6;
  position: relative;
}

.tf-field-wrapper {
  @apply relative;
}

/* =====================================================
   ENHANCED LABELS
   ===================================================== */

.tf-enhanced-label {
  @apply block text-sm font-semibold mb-2;
  color: var(--neutral-700);
  transition: color var(--transition-fast);
}

.tf-enhanced-label:focus-within,
.tf-enhanced-label:has(:focus) {
  color: var(--brand-blue);
}

.tf-label-text {
  @apply flex items-center gap-1;
}

.tf-label-required-indicator {
  @apply text-red-500 font-bold;
  font-size: 1.1em;
}

.tf-label-error {
  color: var(--status-error) !important;
}

.tf-label-warning {
  color: var(--status-warning) !important;
}

/* =====================================================
   ENHANCED FORM FIELDS
   ===================================================== */

.tf-enhanced-field {
  @apply w-full px-4 py-3 rounded-lg border-2 transition-all duration-200;
  background: var(--neutral-50);
  border-color: var(--neutral-300);
  font-size: 16px; /* Prevents zoom on iOS */
  line-height: 1.5;
}

.tf-enhanced-field:focus {
  outline: none;
  border-color: var(--brand-blue);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  background: var(--neutral-50);
}

.tf-enhanced-field:hover:not(:focus):not(:disabled) {
  border-color: var(--neutral-400);
}

/* Field States */
.tf-field-error {
  border-color: var(--status-error) !important;
  background: var(--status-error-bg);
}

.tf-field-error:focus {
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
}

.tf-field-warning {
  border-color: var(--status-warning) !important;
  background: var(--status-warning-bg);
}

.tf-field-warning:focus {
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1) !important;
}

.tf-field-valid {
  border-color: var(--status-success);
}

.tf-field-valid:focus {
  box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
}

/* Disabled State */
.tf-enhanced-field:disabled {
  @apply opacity-60 cursor-not-allowed;
  background: var(--neutral-100);
  border-color: var(--neutral-200);
}

/* =====================================================
   FIELD STATUS INDICATORS
   ===================================================== */

.tf-field-status {
  @apply absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none;
}

.tf-status-icon {
  @apply w-5 h-5;
}

.tf-status-error {
  color: var(--status-error);
}

.tf-status-warning {
  color: var(--status-warning);
}

.tf-status-valid {
  color: var(--status-success);
  opacity: 0.6;
}

/* =====================================================
   HELP TEXT
   ===================================================== */

.tf-help-text {
  @apply flex items-start gap-2 mt-2 text-sm;
  color: var(--neutral-600);
  line-height: 1.4;
}

.tf-help-icon {
  @apply w-4 h-4 mt-0.5 flex-shrink-0;
  color: var(--neutral-500);
}

/* =====================================================
   ERROR MESSAGES
   ===================================================== */

.tf-error-container {
  @apply mt-2 space-y-1;
}

.tf-error-message {
  @apply flex items-start gap-2 text-sm;
  color: var(--status-error);
  line-height: 1.4;
}

.tf-error-icon {
  @apply w-4 h-4 mt-0.5 flex-shrink-0;
}

/* =====================================================
   WARNING MESSAGES
   ===================================================== */

.tf-warning-container {
  @apply mt-2 space-y-1;
}

.tf-warning-message {
  @apply flex items-start gap-2 text-sm;
  color: var(--status-warning);
  line-height: 1.4;
}

.tf-warning-icon {
  @apply w-4 h-4 mt-0.5 flex-shrink-0;
}

/* =====================================================
   ENHANCED CHECKBOXES
   ===================================================== */

.tf-checkbox-container {
  @apply mb-4;
}

.tf-checkbox-wrapper {
  @apply flex items-start gap-3;
}

.tf-checkbox {
  @apply w-5 h-5 mt-0.5 rounded border-2 flex-shrink-0;
  border-color: var(--neutral-400);
  background: var(--neutral-50);
  transition: all var(--transition-fast);
  cursor: pointer;
}

.tf-checkbox:checked {
  background: var(--brand-blue);
  border-color: var(--brand-blue);
}

.tf-checkbox:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.tf-checkbox:hover:not(:disabled) {
  border-color: var(--brand-blue);
}

.tf-checkbox-error {
  border-color: var(--status-error) !important;
}

.tf-checkbox-error:focus {
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
}

.tf-checkbox-warning {
  border-color: var(--status-warning) !important;
}

.tf-checkbox-warning:focus {
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1) !important;
}

.tf-checkbox-label {
  @apply text-sm font-medium leading-5 cursor-pointer;
  color: var(--neutral-700);
  flex: 1;
}

.tf-checkbox-label-error {
  color: var(--status-error);
}

.tf-checkbox-label-warning {
  color: var(--status-warning);
}

/* =====================================================
   ENHANCED SELECTS
   ===================================================== */

.tf-select {
  @apply appearance-none bg-no-repeat bg-right pr-10;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
  background-position: right 0.75rem center;
  background-size: 1.25rem 1.25rem;
}

.tf-select:focus {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%233b82f6' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
}

/* =====================================================
   ENHANCED TEXTAREAS
   ===================================================== */

.tf-textarea {
  @apply min-h-[100px] resize-y;
  font-family: inherit;
}

/* =====================================================
   ACCESSIBILITY ENHANCEMENTS
   ===================================================== */

/* Screen Reader Only Content */
.sr-only {
  @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
  clip: rect(0, 0, 0, 0);
}

/* Focus Visible Enhancement */
.tf-enhanced-field:focus-visible,
.tf-checkbox:focus-visible {
  outline: 2px solid var(--brand-blue);
  outline-offset: 2px;
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  .tf-enhanced-field {
    border-width: 3px;
  }
  
  .tf-field-error {
    border-color: #ff0000 !important;
  }
  
  .tf-field-warning {
    border-color: #ff8800 !important;
  }
  
  .tf-field-valid {
    border-color: #00aa00;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .tf-enhanced-field,
  .tf-checkbox,
  .tf-enhanced-label {
    transition: none;
  }
}

/* =====================================================
   MOBILE ACCESSIBILITY ENHANCEMENTS
   ===================================================== */

@media (max-width: 768px) {
  .tf-enhanced-field {
    font-size: 16px; /* Prevents iOS zoom */
    padding: 12px 16px;
  }
  
  .tf-checkbox {
    @apply w-6 h-6; /* Larger touch target */
  }
  
  .tf-field-status {
    @apply right-4 w-6 h-6;
  }
  
  .tf-status-icon {
    @apply w-6 h-6;
  }
}

/* =====================================================
   ENHANCED FORM GROUPS
   ===================================================== */

.tf-enhanced-form-group {
  @apply space-y-4;
}

.tf-enhanced-form-row {
  @apply grid grid-cols-1 md:grid-cols-2 gap-4;
}

.tf-enhanced-form-section {
  @apply space-y-6 p-6 rounded-lg border;
  background: var(--glass-bg-light);
  border-color: var(--neutral-200);
}

.tf-enhanced-form-section-title {
  @apply text-lg font-semibold mb-4;
  color: var(--neutral-800);
}

/* =====================================================
   VALIDATION SUMMARY
   ===================================================== */

.tf-validation-summary {
  @apply p-4 rounded-lg border-l-4 mb-6;
  background: var(--status-error-bg);
  border-color: var(--status-error);
}

.tf-validation-summary[data-level="warning"] {
  background: var(--status-warning-bg);
  border-color: var(--status-warning);
}

.tf-validation-summary-title {
  @apply font-semibold mb-2;
  color: var(--status-error);
}

.tf-validation-summary[data-level="warning"] .tf-validation-summary-title {
  color: var(--status-warning);
}

.tf-validation-summary-list {
  @apply space-y-1 text-sm;
}

.tf-validation-summary-item {
  @apply flex items-start gap-2;
}

/* =====================================================
   PROGRESS INDICATORS
   ===================================================== */

.tf-field-progress {
  @apply mt-2 flex items-center gap-2 text-xs;
  color: var(--neutral-600);
}

.tf-field-progress-bar {
  @apply flex-1 h-1 bg-neutral-200 rounded-full overflow-hidden;
}

.tf-field-progress-fill {
  @apply h-full transition-all duration-300;
  background: var(--brand-blue);
}

.tf-field-progress[data-level="error"] .tf-field-progress-fill {
  background: var(--status-error);
}

.tf-field-progress[data-level="warning"] .tf-field-progress-fill {
  background: var(--status-warning);
}

.tf-field-progress[data-level="success"] .tf-field-progress-fill {
  background: var(--status-success);
}